<?php

namespace NewApiBundle\Model\Vulnerability;

use NewApiBundle\Exception\ScoringCsvException;

class ScoringValueObject
{
    private $score = [];
    private $conditionValue = [];

    public function setScore(string $condition, int $value): void
    {
        $this->score[$condition] = $value;
    }

    public function setConditionValue(string $condition, int $value): void
    {
        $this->conditionValue[$condition] = $value;
    }

    public function getScore(string $condition): ?int
    {
        if (isset($this->score[$condition])) {
            return $this->score[$condition];
        }

        return null;
    }

    public function getConditionValue(string $condition): ?int
    {
        if (isset($this->conditionValue[$condition])) {
            return $this->conditionValue[$condition];
        }

        return null;
    }


    /**
     * @throws ScoringCsvException
     */
    public function validate(): void
    {
        foreach (ConditionEnum::all() as $condition) {
            if (!isset($this->score[$condition])) {
                throw new ScoringCsvException($condition, 'Missing score');
            }
        }
    }
}
