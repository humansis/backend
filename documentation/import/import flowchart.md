``` mermaid
    flowchart LR

    subgraph UPLOAD
        NEW --> |UPLOAD| UPLOADING
        INTEGRITY_CHECK_CORRECT --> |UPLOAD| UPLOADING
        INTEGRITY_CHECK_FAILED --> |UPLOAD| UPLOADING
        UPLOADING --> |FAIL_UPLOAD| UPLOAD_FAILED
    end

    subgraph INTEGRITY
        UPLOADING --> |CHECK_INTEGRITY| INTEGRITY_CHECKING
        INTEGRITY_CHECK_FAILED --> |CHECK_INTEGRITY| INTEGRITY_CHECKING
        INTEGRITY_CHECKING --> |COMPLETE_INTEGRITY| INTEGRITY_CHECK_CORRECT
        INTEGRITY_CHECKING --> |FAIL_INTEGRITY| INTEGRITY_CHECK_FAILED
        INTEGRITY_CHECKING --> |REDO_INTEGRITY| INTEGRITY_CHECKING
    end

    subgraph IDENTITY
        INTEGRITY_CHECK_CORRECT --> |CHECK_IDENTITY| IDENTITY_CHECKING
        IDENTITY_CHECKING --> |CHECK_IDENTITY| IDENTITY_CHECKING
        IDENTITY_CHECK_CORRECT --> |CHECK_IDENTITY| IDENTITY_CHECKING
        IDENTITY_CHECKING --> |COMPLETE_IDENTITY|IDENTITY_CHECK_CORRECT
        IDENTITY_CHECKING --> |FAIL_IDENTITY| IDENTITY_CHECK_FAILED   
        IDENTITY_CHECKING --> |REDO_IDENTITY| IDENTITY_CHECKING 
        IDENTITY_CHECK_FAILED --> |RESOLVE_IDENTITY_DUPLICITIES| IDENTITY_CHECK_CORRECT    
    end

    subgraph SIMILARITY
        IDENTITY_CHECK_CORRECT --> |CHECK_SIMILARITY| SIMILARITY_CHECKING
        SIMILARITY_CHECKING --> |COMPLETE_SIMILARITY| SIMILARITY_CHECK_CORRECT
        SIMILARITY_CHECKING --> |FAIL_SIMILARITY| SIMILARITY_CHECK_FAILED
        SIMILARITY_CHECKING --> |REDO_SIMILARITY| SIMILARITY_CHECKING
        SIMILARITY_CHECK_FAILED --> |RESOLVE_SIMILARITY_DUPLICITIES| SIMILARITY_CHECK_CORRECT
    end
    re{RESET}
    IDENTITY_CHECKING --> re
    IDENTITY_CHECK_CORRECT --> re
    SIMILARITY_CHECKING --> re
    SIMILARITY_CHECK_CORRECT --> re
    SIMILARITY_CHECK_FAILED --> re
    re --> |RESET| IDENTITY_CHECKING

    IDENTITY_CHECK_CORRECT --> |IMPORT| IMPORTING
    SIMILARITY_CHECK_CORRECT --> |IMPORT| IMPORTING
    IMPORTING --> |FINISH| FINISHED
    

    ca1{CANCEL UPLOAD}
    ca2{CANCEL INTEGRITY}
    ca3{CANCEL IDENTITY}
    ca4{CANCEL SIMILARITY}
    NEW --> |CANCEL| ca1
    UPLOAD_FAILED --> |CANCEL| ca1
    INTEGRITY_CHECKING --> |CANCEL| ca2
    INTEGRITY_CHECK_CORRECT --> |CANCEL| ca2
    INTEGRITY_CHECK_FAILED --> |CANCEL| ca2
    IDENTITY_CHECKING --> |CANCEL| ca3
    IDENTITY_CHECK_CORRECT --> |CANCEL| ca3
    IDENTITY_CHECK_FAILED --> |CANCEL| ca3
    SIMILARITY_CHECKING --> |CANCEL| ca4
    SIMILARITY_CHECK_CORRECT --> |CANCEL| ca4
    SIMILARITY_CHECK_FAILED --> |CANCEL| ca4

    ca1 --> CANCEL
    ca2 --> CANCEL
    ca3 --> CANCEL
    ca4 --> CANCEL

